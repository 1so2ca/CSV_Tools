## なにこれ
- ２つのCSVの相違点をチェックするツール

## 前提
- ２つのCSVのフィールドの「名称」: 完全一致していないといけない
- ２つのCSVのフィールドの「順番」: 一致していなくても良い
- ２つのCSVのフィールドの「総数」: 一致していなくても良い 
- ２つのCSVのレコードの「総数」: 一致していなくても良い 
- ２つのCSVのレコードの「順番」: 一致していなくても良い
- ２つのCSVのレコードの「主キー」: すべてのレコードに必ず存在していないといけない、存在していない場合はエラー。
- ２つのCSVのレコードの「主キーの値」: 完全一致していないといけない

- 主キーフィールドの数: 一つでないといけない。(将来的に２つ以上のフィールドを組み合わせてそれを主キーとして設定できるようにするかも？)
- 主キーの値: 同じファイルで重複があっても動作はする。
	- ただし、重複している主キーと紐付いたレコードに対しては相違点のチェックを行わず、「この主キーのレコードが重複していた」という出力のみを返すものとする
		- つまり、正しく相違点をチェックするためには同じファイルで主キーの重複があってはならない。
- フィールドの値: 同じファイルで重複があった場合動作しない
	- 「このフィールドが重複している」という出力結果のみを返す。

- CSVの1行目のみをフィールドとして扱い、2行目以降はすべてレコードとして扱う。
- CSVの1列目を主キーとして扱う。
## 使い方
kintoneにコードファイルをJSファイルとして読み込む
レコード一覧画面上部に「CSV1読み込み」「CSV2読み込み」ボタンが出てくるのでそれを押し、比較したいCSVを読み込ませる。
divとコンソールに相違点が出力され、相違点CSVダウンロードボタンが表示される。

## オプション
- 相違点があったレコードのみ抽出して出力することもできる

## 注意点
- 当ツールのレコードの順番はCSV1に合わせるものとする
	- 

## 出力結果サンプル
### CSV1
csv_1.csv

| PK  | FA    | FB   | FC   | FX   |
| --- | ----- | ---- | ---- | ---- |
| 1   | FA1   | FB1  | FC1  |      |
| 2   | FA2   |      | FC2  | FX2  |
| 3   | FA3   | FB3  |      | FX3  |
| 10  | FA10  | FB10 | FC10 | FX10 |
| 10  | FA100 | FB10 | FC10 | FX10 |
| 11  | FA11  | FB11 | FC11 | FX11 |
| 20  | FA20  | FB20 | FC20 | FX20 |
| 30  | FA30  | FB30 | FC30 | FX30 |
| 30  | FA300 | FB30 | FC30 | FX30 |

### CSV2
csv_2.csv

| PK  | FC  | FA    | FB    | FY   |
| --- | --- | ----- | ----- | ---- |
| 2   |     | FA2   | ABC   | FY2  |
| 1   |     | FA1   | FB1   | FY1  |
| 3   | FC2 | FA3   | FB333 | FY3  |
| 10  |     | FA100 | FB10  | FY10 |
| 11  |     | FA11  | FB11  | FY11 |
| 11  |     | FA11  | FB11  | FY11 |
| 21  |     | FA21  | FB21  | FY21 |
| 31  |     | FA31  | FB31  | FY31 |
| 31  |     | FA31  | FB31  | FY31 |

### 出力 
#### 202401230123_diff.csv

| PK  | FA  | FB         | FC    |
| --- | --- | ---------- | ----- |
| 1   |     |            | FC1<> |
| 2   |     | <>ABC      |       |
| 3   |     | FB3<>FB333 |       |

#### 20240123012345_WarnField.txt
以下のフィールドはcsv_1.csvにのみ存在したため、相違点チェックを行いませんでした。
FX 

以下のフィールドはcsv_2.csvにのみ存在したため、相違点チェックを行いませんでした。
FY

#### 20240123012345_WarnRecord.txt 
以下の主キーの値がcsv_1.csvにおいて重複したため、該当するレコードに対し相違点チェックを行いませんでした。
10
30

以下の主キーの値がcsv_2.csvにおいて重複したため、該当するレコードに対し相違点チェックを行いませんでした。
11
31

以下の主キーの値がcsv_1.csvにしか存在しなかったため、該当するレコードに対し相違点チェックを行いませんでした。
20
30

以下の主キーの値がcsv_2.csvにしか存在しなかったため、該当するレコードに対し相違点チェックを行いませんでした。
21
31

### 解説
以下3つのファイルが自動でダウンロードされる。
YYYYMMDDhhmmss_diff.csv 
YYYYMMDDhhmmss_WarnField.txt 
YYYYMMDDhhmmss_WarnRecord.txt

#### YYYYMMDDhhmmss_diff.csv 
どのフィールドのどのレコードにて差があるかを示したcsvファイル。

- 相違点がある値以外はすべて空欄となる。
- レコードの順番はCSV1と同一のものとなる。
- 相違点は"CSV1の値"<>"CSV2の値"という形で出力される。
- CSV1、CSV2のいずれかにおいて主キーの重複があるレコードは相違点チェックを行わない。
	- そのため、主キーの重複がある場合元データとレコードの総数が合わなくなる。
- CSV1、CSV2のいずれかにおいてフィールド名の重複があるフィールドは相違点チェックを行わない。
	- そのため、フィールド名の重複がある場合元データとフィールドの総数が合わなくなる。

#### YYYYMMDDhhmmss_WarnField.txt 
フィールドについての注意点を示したファイル。

一方のファイルにしか存在しないフィールドが存在すること、そしてそのフィールドに対して相違点チェックを行っていないことを注意文として示すファイルとなっている。

（フィールド名の重複があった場合、そもそもファイル単位で相違点チェックを行わずにエラーを吐くためフィールド名の重複についてはここでは記述されない）

#### YYYYMMDDhhmmss_WarnRecord.txt 
レコードについての注意点を示したファイル。

以下の状態のレコードが存在したため、それらに対して相違点チェックを行っていないことを注意文として示すファイルとなっている。
- 一つのファイルで主キーが重複している
- 一方のファイルにしか存在しない主キーのレコードが存在する。
